library(washr)
setup_rawdata()
library(washr)
devtools::build_readme()
devtools::document()
devtools::check()
devtools::install()
setup_website()
# Required Libraries
library(tidyverse)
library(leaflet)
# Clean and prepare the data
df_clean <- floodresponsemw %>%
# Filter out records missing coordinates
filter(!is.na(latitude), !is.na(longitude)) %>%
# Assign colors based on functional status
mutate(
status_color = case_when(
functional_status == "Functional" ~ "green",
functional_status == "Not functional" ~ "red",
TRUE ~ "gray"  # Unknown or missing status
)
)
# Create an interactive map using leaflet
leaflet(df_clean) %>%
addTiles() %>%  # Add default OpenStreetMap tiles
addCircleMarkers(
lng = ~longitude,
lat = ~latitude,
color = ~status_color,  # Color by functional status
radius = ~log(total_users_of_water_point + 1) * 2,
stroke = FALSE,
fillOpacity = 0.7,
# Add popups showing basic water point info
popup = ~paste0(
"<b>Water Point:</b> ", water_point_name, "<br>",
"<b>Status:</b> ", functional_status, "<br>",
"<b>Total Users:</b> ", total_users_of_water_point
)
) %>%
# Add a legend for functional status
addLegend(
"bottomright",
colors = c("green", "red", "gray"),
labels = c("Functional", "Not Functional", "Unknown"),
title = "Water Point Status"
)
devtools::document()
devtools::check()
devtools::install()
